<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Automated reports from tables â€¢ dbreport</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Automated reports from tables">
<meta property="og:description" content="dbreport allows you to create automated reports from data base tables,
    R-objects (e.g. data.table, data.frame, tibble) or from files (e.g. .xlsx, .rds, etc.).
    The reports sum up most important informations of tables (i.e. how many NULLs a column has
    or counts distinct entries) and returns them as a .html, .pdf, or .doc file.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dbreport</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9010</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/andschar/dbreport/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="dbreport" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dbreport" class="anchor"></a>dbreport</h1></div>
<p><code>dbreport</code> is a R-package that letâ€™s you create automated reports of database tables or R-objects (data.table, data.frame, tibble), by summarising table meta data and counting distinct entries for all (selected) columns. Therefore you can keep track of your ever growing database tables in your project and avoid constantly runing queries such as the one below, checking which distinct entries your columns have (at least, this was my motivation for this package ðŸ˜„).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">SELECT</span> var1, <span class="fu">count</span>(var1) <span class="kw">AS</span> n</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">FROM</span> tab1</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">GROUP</span> <span class="kw">BY</span> var1</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">ORDER</span> <span class="kw">BY</span> n <span class="kw">DESC</span></a></code></pre></div>
<p>For now <a href="https://www.postgresql.org">PostgreSQL</a>, <a href="https://www.mysql.com">MySQL</a> and <a href="https://www.sqlite.org/index.html">SQLite</a> databases are supported. Adding methods for additional database libraries are welcomed!</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">'andschar/dbreport'</span>) <span class="co"># not yet on CRAN</span></pre></div>
</div>
<div id="quickstart" class="section level2">
<h2 class="hasAnchor">
<a href="#quickstart" class="anchor"></a>Quickstart</h2>
<p>We load dbreport and connect to our database (<code>con</code>).</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">dbreport</span>)
<span class="no">con</span> <span class="kw">=</span> <span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span>(<span class="kw">drv</span> <span class="kw">=</span> <span class="kw pkg">RPostgres</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/RPostgres/man/Postgres.html">Postgres</a></span>(),
                     <span class="kw">dbname</span> <span class="kw">=</span> <span class="st">'myname'</span>,
                     <span class="kw">host</span> <span class="kw">=</span> <span class="st">'host'</span>,
                     <span class="kw">port</span> <span class="kw">=</span> <span class="st">'port'</span>,
                     <span class="kw">user</span> <span class="kw">=</span> <span class="st">'user'</span>,
                     <span class="kw">password</span> <span class="kw">=</span> <span class="st">'mysecretpassword'</span>)</pre></div>
<p>Now we can create a report of any table therein. Letâ€™s just do this for the <code>information_schema.tables</code> table which is created by default for any Postgres or MySQL database. In doing so, we choose to provide an output directory (<code>output_dir =</code>), to provide a super meaningful title (<code>title =</code>) and to add some introductory text (<code>text =</code>) to the report. As our output format (<code>output_format =</code>) we choose <code>'html_document'</code>. We could also take other <a href="https://rmarkdown.rstudio.com/lesson-9.html">rmarkdown formats</a>, such as <code>'pdf_document'</code>, <code>'github_document'</code>, <code>'html_vignette'</code> (for a very lightweight output) etc.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="reference/dbreport.html">dbreport</a></span>(<span class="kw">con</span> <span class="kw">=</span> <span class="no">con</span>,
         <span class="kw">schema</span> <span class="kw">=</span> <span class="st">'information_schema'</span>,
         <span class="kw">tbl</span> <span class="kw">=</span> <span class="st">'tables'</span>,
         <span class="kw">output_dir</span> <span class="kw">=</span> <span class="st">'/home/user/project1'</span>,
         <span class="kw">title</span> <span class="kw">=</span> <span class="st">'Why not create an information_schem.tables report?!'</span>,
         <span class="kw">text</span> <span class="kw">=</span> <span class="st">'Introductory text.'</span>, <span class="co"># you can alsp provide a file</span>
         <span class="kw">output_format</span> <span class="kw">=</span> <span class="st">'html_document'</span>)</pre></div>
<p>Done! The report together with a .csv file summarising the individual columns is created in the output directory and we can examine it.</p>
</div>
<div id="more-options" class="section level2">
<h2 class="hasAnchor">
<a href="#more-options" class="anchor"></a>More options</h2>
<div id="specific-columns" class="section level3">
<h3 class="hasAnchor">
<a href="#specific-columns" class="anchor"></a>Specific columns</h3>
<p>We can also tweek our report a little more and choose only specific columns (<code>col =</code>) to be included in the report and create treemap plot instead of the lollipop plot (<code>plot_type =</code>). For this we access the publicly avaible Read-Only <a href="https://www.mysql.com">MySQL</a> <a href="https://docs.rfam.org/en/latest/database.html">RNA-sequence database</a> and run <code><a href="reference/dbreport.html">dbreport()</a></code> only on the <em>ncbi_id</em> and <em>species</em> column of the <em>taxonomy</em> table. In doing so we also output the report to a .pdf (<code>output_format =</code>).</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">con</span> <span class="kw">=</span> <span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span>(<span class="kw">drv</span> <span class="kw">=</span> <span class="kw pkg">RMySQL</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/RMySQL/man/MySQLDriver-class.html">MySQL</a></span>(),
                     <span class="kw">host</span> <span class="kw">=</span> <span class="st">'mysql-rfam-public.ebi.ac.uk'</span>,
                     <span class="kw">user</span> <span class="kw">=</span> <span class="st">'rfamro'</span>,
                     <span class="kw">port</span> <span class="kw">=</span> <span class="fl">4497</span>,
                     <span class="kw">dbname</span> <span class="kw">=</span> <span class="st">'Rfam'</span>)</pre></div>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu"><a href="reference/dbreport.html">dbreport</a></span>(<span class="no">con</span>,
         <span class="kw">schema</span> <span class="kw">=</span> <span class="st">'Rfam'</span>,
         <span class="kw">tbl</span> <span class="kw">=</span> <span class="st">'taxonomy'</span>,
         <span class="kw">col</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'ncbi_id'</span>, <span class="st">'species'</span>),
         <span class="kw">plot_type</span> <span class="kw">=</span> <span class="st">'treemap'</span>,
         <span class="kw">output_dir</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">'test_mysql'</span>),
         <span class="kw">output_format</span> <span class="kw">=</span> <span class="st">'pdf_document'</span>)</pre></div>
<p>By default <code><a href="reference/dbreport.html">dbreport()</a></code> closes the connection to a database and you would have to reopen it for every new report you want to create. You can turn off this behavior by setting <code>exit = FALSE</code>. This can be especially useful if you want to create reports for multiple tables automatically, for instance by using <code><a href="https://rdrr.io/r/base/mapply.html">mapply()</a></code>. After having created the reports however, you should run <code><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html">DBI::dbDisconnect(con)</a></code> to close the open database connections.</p>
<div class="sourceCode" id="cb7"><pre class="r">mapply(dbreport::dbreport,
       tbl = c('table1', 'table2'), # vector of table names
       MoreArgs = list(con = con,
                       schema = 'schema1',
                       output_dir = tempdir(),
                       output_format = 'html_vignette',
                       exit = FALSE)
DBI::dbDisconnect(con)</pre></div>
</div>
<div id="column-entries" class="section level3">
<h3 class="hasAnchor">
<a href="#column-entries" class="anchor"></a>Column entries</h3>
<p>We could as well check how often the entry <code>versiocolor</code> occurs (case is ignored) in the <em>Species</em> column of the <em>iris</em> table by specifying the <code>entry =</code> parameter.</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="reference/dbreport.html">dbreport</a></span>(<span class="kw">con</span> <span class="kw">=</span> <span class="no">iris</span>,
         <span class="kw">entry</span> <span class="kw">=</span> <span class="st">'versicolor'</span>,
         <span class="kw">output_dir</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">'report_iris'</span>),
         <span class="kw">output_format</span> <span class="kw">=</span> <span class="st">'html_vignette'</span>,
         <span class="kw">title</span> <span class="kw">=</span> <span class="st">'Iris report'</span>)</pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/andschar/dbreport/">https://â€‹github.com/â€‹andschar/â€‹dbreport/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/andschar/dbreport/issues">https://â€‹github.com/â€‹andschar/â€‹dbreport/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Andreas ScharmÃ¼ller <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Andreas ScharmÃ¼ller.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
